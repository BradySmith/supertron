<!DOCTYPE html>
<html>

	<head>
		<title>SuperTron</title>
	<!--<link rel="stylesheet" type="text/css" href="styles.css"> -->
	</head>

	<body>

		<canvas id="myCanvas" width="800" height="500" style="border:1px solid #c3c3c3;">
			Your browser does not support the HTML5 canvas tag.
		</canvas>

		<script src="/socket.io/socket.io.js"></script>

		<script>
			
			var c=document.getElementById("myCanvas");
			var ctx=c.getContext("2d");
			var myOffset;
			ctx.fillStyle="#FF0000";

			var socket = io.connect('10.227.163.211');


		  socket.on("update", function(data) {
		  	//ctx.clearRect(0,0,800,500);
		  	ctx.font = "10px Arial";
		  	var players = data.currentPlayers;
		  	players.forEach(function (player) {
		  	    ctx.fillStyle = player.color;
		  	    ctx.fillRect(player.x, player.y, 10, 10);
		  	})
		  });
		  
		  window.addEventListener("keydown", handleInput, false);
	    function handleInput(e) {
		 var KeyCode = {LEFT: 37, UP: 38, RIGHT: 39, DOWN: 40};
		 var dir = null;
		 switch (e.keyCode) {
			case KeyCode.UP:
				dir = 'up';
				break;
			case KeyCode.LEFT:
				dir = 'left';
				break;
			case KeyCode.RIGHT:
				dir = 'right';
				break;
			case KeyCode.DOWN:
				dir = 'down';
				break;
		 }
		 if ( dir !== null) {
		    socket.emit('changedirection', { dir: dir });
		 }
        }
		</script>

	</body>
</html>